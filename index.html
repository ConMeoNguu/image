<!DOCTYPE html>
<html>

<head>
    <title>Learn English</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style>
        .newDiv {
            width: 25%;
            border-right: 1px #e5e5e5 solid;
            margin-bottom: 10px;
            /* The width is 20%, by default */
        }

        /* Use a media query to add a break point at 800px: */
        @media screen and (max-width:800px) {
            .newDiv {
                width: 100%;
                border-bottom: 1px #e5e5e5 solid;
                border-right: 1px #e5e5e5 solid;
                padding-left: 20px;
                margin-bottom: 10px;
                /* The width is 100%, when the viewport is 800px or smaller */
            }
        }
    </style>
</head>

<body style="padding-left: 10px;">
    <div style="padding-left: 10px;">
        <div>
            <button id="myBtn">Get data image file</button>
            <button id="btnNext">next</button><span id="count">1</span><span>/</span><span id="indexPage">10</span><button
                id="btnBack">back</button>
            <text id="load"></text>
        </div>
        <div id="music" style="display: flex;flex-direction: row;flex-wrap: wrap; margin-top: 20px;"></div>
        <div><img id="image0" src="" ></div>
        <div><img id="image1" src="" ></div>
        <div><img id="image2" src="" ></div>
        <div><img id="image3" src="" ></div>
        <div><img id="image4" src="" ></div>
        <div><img id="image5" src="" ></div>
        <div><img id="image6" src="" ></div>
        <div><img id="image7" src="" ></div>
        <div><img id="image8" src="" ></div>
        <div><img id="image9" src="" ></div>

        <script>
            var textLoad = document.getElementById('load');
            var textCount = document.getElementById('count');
            var textIndexPage = document.getElementById('indexPage');
            var count = 1;
            var numberItem = 10;
            var indexPage = 10;
            var dataSrc = [];

            document.getElementById("myBtn").addEventListener("click", async function () {
                textLoad.innerHTML = "loading......";
                dataSrc = await test();
                if (dataSrc.length > 0) {
                    textLoad.innerHTML = "get data success";
                    indexPage = Math.ceil(dataSrc[0].data.length / numberItem);
                    textIndexPage.innerHTML = indexPage;
                    createdNewDiv(dataSrc[0].data, count);
                }
            });

            document.getElementById("btnNext").addEventListener("click", async function () {
                if(count > 1) {
                    count -= 1;
                    textCount.innerHTML = count;
                    createdNewDiv(dataSrc[0].data, count);
                }
            });

            
            document.getElementById("btnBack").addEventListener("click", async function () {
                if(count < indexPage) {
                    count += 1;
                    textCount.innerHTML = count;
                    createdNewDiv(dataSrc[0].data, count);
                }
            });

            const createdNewDiv = (dataSrc, count) => {
                maxNumber = dataSrc.length - count* numberItem >= 0  ? 10 :  dataSrc.length - count* numberItem;
                console.log(maxNumber)
                for (var j = 0 * numberItem; j < maxNumber; j++) {
                    var idImage = "image" + j;
                    var countImage = count* numberItem + j;
                    const urlImage = dataSrc[countImage].Url;
                    document.getElementById(idImage).setAttribute("src", urlImage);
                }

                // var controlBtn = document.getElementById('play-pause');

                // var music = document.getElementById('music');
                // music.appendChild(newDiv);
            }

            const test = async () => {
                const urlSever = "https://5fbb49acc09c200016d40526.mockapi.io/api/image2-discord";
                // const urlSever = "http://localhost:3000/learn-english";
                const response = await fetch(urlSever, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                const myJson = await response.json(); //extract JSON from the http response

                return myJson;
            }
        </script>



</body>

</html>
