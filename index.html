<!DOCTYPE html>
<html>

<head>
    <title>Learn English</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style>
        .newDiv {
            width: 25%;
            border-right: 1px #e5e5e5 solid;
            margin-bottom: 10px;
            /* The width is 20%, by default */
        }

        /* Use a media query to add a break point at 800px: */
        @media screen and (max-width:800px) {
            .newDiv {
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <div style="padding: 10px;">
        <div style="padding: 10px 0;">
            <button id="myBtn">Get data image file</button>
            <button id="btnNext">next</button><span id="count">1</span><span>/</span><span
                id="indexPage">10</span><button id="btnBack">back</button>
            <text id="load"></text>
        </div>
        <div id="returnDiv"></div>
        <!-- <div class="newDiv"><img id="image0" src="" class="newDiv">
            <video class="newDiv" controls id="video0" src="">
            </video>
        </div>
        <div class="newDiv"><img id="image1" src="" class="newDiv"><video class="newDiv" controls id="video1" src="">
            </video></div>
        <div class="newDiv"><img id="image2" src="" class="newDiv"><video class="newDiv" controls id="video2" src="">
            </video></div>
        <div class="newDiv"><img id="image3" src="" class="newDiv"><video class="newDiv" controls id="video3" src="">
            </video></div>
        <div class="newDiv"><img id="image4" src="" class="newDiv"><video class="newDiv" controls id="video4" src="">
            </video></div>
        <div class="newDiv"><img id="image5" src="" class="newDiv"><video class="newDiv" controls id="video5" src="">
            </video></div>
        <div class="newDiv"><img id="image6" src="" class="newDiv"><video class="newDiv" controls id="video6" src="">
            </video></div>
        <div class="newDiv"><img id="image7" src="" class="newDiv"><video class="newDiv" controls id="video7" src="">
            </video></div>
        <div class="newDiv"><img id="image8" src="" class="newDiv"><video class="newDiv" controls id="video8" src="">
            </video></div>
        <div class="newDiv"><img id="image9" src="" class="newDiv"><video class="newDiv" controls id="video9" src="">
            </video></div> -->

        <script>
            var textLoad = document.getElementById('load');
            var textCount = document.getElementById('count');
            var textIndexPage = document.getElementById('indexPage');
            var count = 1;
            var numberItem = 10;
            var indexPage = 10;
            var dataSrc = [];

            document.getElementById("myBtn").addEventListener("click", async function () {
                textLoad.innerHTML = "loading......";
                dataSrc = await test();
                if (dataSrc.length > 0) {
                    textLoad.innerHTML = "";
                    indexPage = Math.ceil(dataSrc[0].data.length / numberItem);
                    textIndexPage.innerHTML = indexPage;
                    createdNewDiv(dataSrc[0].data, count);
                }
            });

            document.getElementById("btnNext").addEventListener("click", async function () {
                if (count > 1) {
                    count -= 1;
                    textCount.innerHTML = count;
                    createdNewDiv(dataSrc[0].data, count);
                }
            });


            document.getElementById("btnBack").addEventListener("click", async function () {
                if (count < indexPage) {
                    count += 1;
                    textCount.innerHTML = count;
                    createdNewDiv(dataSrc[0].data, count);
                }
            });

            const cleanDiv = () => {
                var returnDiv = document.getElementById('returnDiv');
                while (returnDiv.hasChildNodes()) {
                    returnDiv.removeChild(returnDiv.firstChild);
                }
            }

            const createdNewDiv = (dataSrc, count) => {
                cleanDiv();
                maxNumber = dataSrc.length - count * numberItem >= 0 ? 10 : dataSrc.length - (count - 1) * numberItem;

                var newDiv = document.getElementById("returnDiv");
                var htmlTable = "";
                for (var j = 0; j < maxNumber; j++) {
                    var countImage = (count - 1) * numberItem + j;
                    const urlImage = dataSrc[countImage].Url;
                    if (urlImage.search("mp4") > 0) {
                        var id = "video" + j;
                        htmlTable += "<div class='newDiv'><video id='"+id+"' class='newDiv' controls src='"+urlImage+"'></video></div>";
                    } else {
                        var id = "image" + j;
                        htmlTable += "<div class='newDiv'><img id='"+id+"' src='"+urlImage+"' class='newDiv'></div>";
                    }
                    
                }

                newDiv.innerHTML = htmlTable;
            }

            const test = async () => {
                const urlSever = "https://5fbb49acc09c200016d40526.mockapi.io/api/image2-discord";
                // const urlSever = "http://localhost:3000/learn-english";
                const response = await fetch(urlSever, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                const myJson = await response.json(); //extract JSON from the http response

                return myJson;
            }
        </script>



</body>

</html>
